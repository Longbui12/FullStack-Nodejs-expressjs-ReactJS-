<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GET CRUD</title>
  </head>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    td {
      text-align: center;
    }
    .btn-edit {
      outline: none;
      border: none;
      background: orange;
      height: 25px;
      width: 60px;
      cursor: pointer;
      border: 2px solid rgb(40, 38, 38);
      border-radius: 5px;
      margin: 5px 5px;
    }
    .btn-delete {
      outline: none;
      border: none;
      background: red;
      height: 23px;
      width: 55px;
      cursor: pointer;
      border: 2px solid rgb(40, 38, 38);
      border-radius: 5px;
      margin: 3px 3px;
    }
  </style>
  <body>
    <table style="width: 100%">
      <tr>
        <th>Email</th>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Address</th>
        <th>Gender</th>
        <th>Phone number</th>
        <th>RoleId</th>
        <th>Actions</th>
      </tr>

      <% for(let i=0; i < dataTable.length; i++) { %>
      <tr>
        <td><%= dataTable[i].email %></td>
        <td><%= dataTable[i].firstName %></td>
        <td><%= dataTable[i].lastName %></td>
        <td><%= dataTable[i].address %></td>
        <td><%= dataTable[i].gender %></td>
        <td><%= dataTable[i].phonenumber %></td>
        <td><%= dataTable[i].roleId %></td>
        <td>
          <a
            href="/edit-crud?id=<%= dataTable[i].id %>"
            type="button"
            class="btn-edit"
            >Edit</a
          >
          <!-- <a
            href="/delete-crud?id=<%= dataTable[i].id %>"
            type="button"
            class="btn-delete"
            >Delete
          </a> -->
          <button
            type="button"
            class="btn-delete"
            onclick="showDeleteConfirmation('<%= dataTable[i].id %>')"
          >
            Delete
          </button>
        </td>
      </tr>
      <% } %>
    </table>
    <script>
      function showDeleteConfirmation(userId) {
        const confirmation = window.confirm(
          "Are you sure you want to delete this user?"
        );
        if (confirmation) {
          const deleteConfirmed = window.confirm(
            "This action cannot be undone. Do you really want to delete?"
          );
          if (deleteConfirmed) {
            window.location.href = `/delete-crud?id=${userId}`;
          }
        }
      }
    </script>
  </body>
</html>
